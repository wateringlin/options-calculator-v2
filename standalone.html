<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æœŸæƒå‚ç›´ä»·å·®è®¡ç®—å™¨</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
/* ===== CSS Variables ===== */
:root {
    --bg-primary: #0f0f1a;
    --bg-secondary: #1a1a2e;
    --bg-card: linear-gradient(145deg, #1e1e32, #16162a);
    --text-primary: #ffffff;
    --text-secondary: #a0a0b8;
    --text-muted: #6a6a80;
    --accent-green: #00d68f;
    --accent-green-glow: rgba(0, 214, 143, 0.3);
    --accent-red: #ff4d6a;
    --accent-red-glow: rgba(255, 77, 106, 0.3);
    --accent-blue: #5c7cfa;
    --accent-purple: #9775fa;
    --accent-orange: #ff922b;
    --border-color: rgba(255, 255, 255, 0.08);
    --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.4);
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html { font-size: 16px; }

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
}

.container {
    max-width: 480px;
    margin: 0 auto;
    padding: 16px;
    padding-bottom: 32px;
}

.header {
    text-align: center;
    padding: 24px 0 16px;
}

.header h1 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 4px;
    background: linear-gradient(135deg, #fff, #a0a0ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.subtitle {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.card {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: 20px;
    margin-bottom: 16px;
    box-shadow: var(--shadow-sm);
}

.card-title {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 12px;
}

.section-desc {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-bottom: 16px;
}

.input-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 16px;
}

.input-item label {
    display: block;
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-bottom: 6px;
}

.input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    transition: all 0.2s ease;
}

.input-wrapper:focus-within {
    border-color: var(--accent-blue);
    box-shadow: 0 0 0 3px rgba(92, 124, 250, 0.2);
}

.input-wrapper .currency {
    padding-left: 12px;
    color: var(--text-secondary);
    font-weight: 500;
}

.input-wrapper input {
    flex: 1;
    background: transparent;
    border: none;
    padding: 12px;
    padding-left: 4px;
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary);
    outline: none;
    width: 100%;
}

.input-wrapper input::placeholder { color: var(--text-muted); }
.input-wrapper.small { max-width: 100px; }
.input-wrapper.small input {
    padding: 8px 4px 8px 12px;
    font-size: 1rem;
    text-align: center;
}

.input-wrapper .unit {
    padding-right: 12px;
    color: var(--text-secondary);
    font-weight: 500;
}

.net-credit {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: rgba(92, 124, 250, 0.1);
    border-radius: var(--radius-sm);
    border: 1px solid rgba(92, 124, 250, 0.2);
}

.net-credit span:first-child {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.net-credit-value {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--accent-blue);
}

.settings-group {
    display: flex;
    justify-content: space-between;
    gap: 16px;
}

.setting-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex: 1;
}

.setting-item label {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.leg-section { border-left: 3px solid; }
.short-leg-section { border-left-color: var(--accent-red); }
.long-leg-section { border-left-color: var(--accent-green); }

.futu-settings {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.futu-setting {
    background: rgba(0, 0, 0, 0.2);
    border-radius: var(--radius-md);
    overflow: hidden;
}

.futu-setting.profit { border: 1px solid rgba(0, 214, 143, 0.2); }
.futu-setting.loss { border: 1px solid rgba(255, 77, 106, 0.2); }

.futu-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    background: rgba(255, 255, 255, 0.03);
    border-bottom: 1px solid var(--border-color);
}

.futu-icon { font-size: 0.9rem; }
.futu-label { font-size: 0.8rem; font-weight: 600; flex: 1; }

.futu-badge {
    font-size: 0.65rem;
    font-weight: 600;
    padding: 3px 8px;
    border-radius: 20px;
}

.profit-badge { background: rgba(0, 214, 143, 0.2); color: var(--accent-green); }
.loss-badge { background: rgba(255, 77, 106, 0.2); color: var(--accent-red); }
.muted-badge { background: rgba(255, 255, 255, 0.1); color: var(--text-muted); }

.futu-body { padding: 8px 12px; }

.futu-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 0;
}

.futu-row.highlight {
    background: rgba(255, 255, 255, 0.03);
    margin: 4px -12px;
    padding: 10px 12px;
    border-radius: var(--radius-sm);
}

.futu-key { font-size: 0.75rem; color: var(--text-muted); }
.futu-val { font-size: 0.8rem; color: var(--text-secondary); }

.futu-price {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--text-primary);
}

.futu-setting.profit .futu-price {
    color: var(--accent-green);
    text-shadow: 0 0 15px var(--accent-green-glow);
}

.futu-setting.loss .futu-price {
    color: var(--accent-red);
    text-shadow: 0 0 15px var(--accent-red-glow);
}

.summary-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 12px;
}

.summary-item {
    text-align: center;
    padding: 12px 8px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: var(--radius-sm);
}

.summary-label {
    display: block;
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-bottom: 4px;
}

.summary-value {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
}

.summary-item.profit .summary-value { color: var(--accent-green); }
.summary-item.loss .summary-value { color: var(--accent-red); }

.tips-section {
    background: rgba(151, 117, 250, 0.08);
    border-color: rgba(151, 117, 250, 0.2);
}

.tips-content p {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-bottom: 8px;
    padding-left: 8px;
    border-left: 2px solid var(--accent-purple);
}

.tips-content p:last-child { margin-bottom: 0; }
.tips-content strong { color: var(--text-primary); }

.footer { text-align: center; padding: 16px; }
.footer p { font-size: 0.75rem; color: var(--text-muted); }

@media (max-width: 360px) {
    .container { padding: 12px; }
    .input-group { grid-template-columns: 1fr; }
    .settings-group { flex-direction: column; gap: 12px; }
    .summary-grid { grid-template-columns: 1fr; }
}

@supports (padding-bottom: env(safe-area-inset-bottom)) {
    .container { padding-bottom: calc(32px + env(safe-area-inset-bottom)); }
}
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸ“Š æœŸæƒä»·å·®è®¡ç®—å™¨</h1>
            <p class="subtitle">Credit Spread å•è…¿æ­¢ç›ˆæ­¢æŸè®¡ç®—</p>
        </header>

        <main class="main">
            <section class="card input-section">
                <h2 class="card-title">ğŸ’° å¼€ä»“ä»·æ ¼</h2>
                <div class="input-group">
                    <div class="input-item">
                        <label for="sellPrice">å–å‡ºä»· (Short Leg)</label>
                        <div class="input-wrapper">
                            <span class="currency">$</span>
                            <input type="number" id="sellPrice" placeholder="0.67" step="0.01" min="0" inputmode="decimal">
                        </div>
                    </div>
                    <div class="input-item">
                        <label for="buyPrice">ä¹°å…¥ä»· (Long Leg)</label>
                        <div class="input-wrapper">
                            <span class="currency">$</span>
                            <input type="number" id="buyPrice" placeholder="0.17" step="0.01" min="0" inputmode="decimal">
                        </div>
                    </div>
                </div>
                <div class="net-credit">
                    <span>å‡€æ”¶å…¥ (Net Credit)</span>
                    <span class="net-credit-value" id="netCredit">$0.00</span>
                </div>
            </section>

            <section class="card settings-section">
                <h2 class="card-title">âš™ï¸ æ­¢ç›ˆæ­¢æŸæ¯”ä¾‹</h2>
                <div class="settings-group">
                    <div class="setting-item">
                        <label for="takeProfitPercent">æ­¢ç›ˆæ¯”ä¾‹</label>
                        <div class="input-wrapper small">
                            <input type="number" id="takeProfitPercent" value="75" step="5" min="0" max="100" inputmode="numeric">
                            <span class="unit">%</span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label for="stopLossPercent">æ­¢æŸæ¯”ä¾‹</label>
                        <div class="input-wrapper small">
                            <input type="number" id="stopLossPercent" value="200" step="10" min="0" inputmode="numeric">
                            <span class="unit">%</span>
                        </div>
                    </div>
                </div>
            </section>

            <section class="card leg-section short-leg-section">
                <h2 class="card-title">ğŸ”´ Short Leg å¯Œé€”è®¾ç½®</h2>
                <p class="section-desc">å–å‡ºçš„æœŸæƒï¼Œéœ€è¦ä¹°å›å¹³ä»“</p>
                
                <div class="futu-settings">
                    <div class="futu-setting profit">
                        <div class="futu-header">
                            <span class="futu-icon">âœ…</span>
                            <span class="futu-label">æ­¢ç›ˆå•</span>
                            <span class="futu-badge profit-badge" id="shortProfitBadge">ç›ˆåˆ© $0.00</span>
                        </div>
                        <div class="futu-body">
                            <div class="futu-row">
                                <span class="futu-key">æ¡ä»¶ç±»å‹</span>
                                <span class="futu-val">ä»·æ ¼ â‰¤ è§¦å‘ä»·</span>
                            </div>
                            <div class="futu-row highlight">
                                <span class="futu-key">è§¦å‘ä»·æ ¼</span>
                                <span class="futu-val futu-price" id="shortTpPrice">$0.00</span>
                            </div>
                            <div class="futu-row">
                                <span class="futu-key">è®¢å•ç±»å‹</span>
                                <span class="futu-val">å¸‚ä»·ä¹°å…¥</span>
                            </div>
                        </div>
                    </div>

                    <div class="futu-setting loss">
                        <div class="futu-header">
                            <span class="futu-icon">ğŸ›‘</span>
                            <span class="futu-label">æ­¢æŸå•</span>
                            <span class="futu-badge loss-badge" id="shortLossBadge">äºæŸ $0.00</span>
                        </div>
                        <div class="futu-body">
                            <div class="futu-row">
                                <span class="futu-key">æ¡ä»¶ç±»å‹</span>
                                <span class="futu-val">ä»·æ ¼ â‰¥ è§¦å‘ä»·</span>
                            </div>
                            <div class="futu-row highlight">
                                <span class="futu-key">è§¦å‘ä»·æ ¼</span>
                                <span class="futu-val futu-price" id="shortSlPrice">$0.00</span>
                            </div>
                            <div class="futu-row">
                                <span class="futu-key">è®¢å•ç±»å‹</span>
                                <span class="futu-val">å¸‚ä»·ä¹°å…¥</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="card leg-section long-leg-section">
                <h2 class="card-title">ğŸŸ¢ Long Leg å¯Œé€”è®¾ç½®</h2>
                <p class="section-desc">ä¹°å…¥çš„æœŸæƒï¼Œéœ€è¦å–å‡ºå¹³ä»“</p>
                
                <div class="futu-settings">
                    <div class="futu-setting profit">
                        <div class="futu-header">
                            <span class="futu-icon">âœ…</span>
                            <span class="futu-label">æ­¢ç›ˆå•</span>
                            <span class="futu-badge muted-badge">é…åˆShortå¹³ä»“</span>
                        </div>
                        <div class="futu-body">
                            <div class="futu-row">
                                <span class="futu-key">æ¡ä»¶ç±»å‹</span>
                                <span class="futu-val">ä»·æ ¼ â‰¤ è§¦å‘ä»·</span>
                            </div>
                            <div class="futu-row highlight">
                                <span class="futu-key">è§¦å‘ä»·æ ¼</span>
                                <span class="futu-val futu-price" id="longTpPrice">$0.01</span>
                            </div>
                            <div class="futu-row">
                                <span class="futu-key">è®¢å•ç±»å‹</span>
                                <span class="futu-val">å¸‚ä»·å–å‡º</span>
                            </div>
                        </div>
                    </div>

                    <div class="futu-setting loss">
                        <div class="futu-header">
                            <span class="futu-icon">ğŸ›‘</span>
                            <span class="futu-label">æ­¢æŸå•</span>
                            <span class="futu-badge muted-badge">é…åˆShortå¹³ä»“</span>
                        </div>
                        <div class="futu-body">
                            <div class="futu-row">
                                <span class="futu-key">æ¡ä»¶ç±»å‹</span>
                                <span class="futu-val">ä»·æ ¼ â‰¥ è§¦å‘ä»·</span>
                            </div>
                            <div class="futu-row highlight">
                                <span class="futu-key">è§¦å‘ä»·æ ¼</span>
                                <span class="futu-val futu-price" id="longSlPrice">$0.00</span>
                            </div>
                            <div class="futu-row">
                                <span class="futu-key">è®¢å•ç±»å‹</span>
                                <span class="futu-val">å¸‚ä»·å–å‡º</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="card summary-section">
                <h2 class="card-title">ğŸ“‹ ç­–ç•¥æ¦‚è§ˆ</h2>
                <div class="summary-grid">
                    <div class="summary-item">
                        <span class="summary-label">ç­–ç•¥æ”¶å…¥</span>
                        <span class="summary-value" id="summaryCredit">$0.00</span>
                    </div>
                    <div class="summary-item profit">
                        <span class="summary-label">æ­¢ç›ˆç›®æ ‡</span>
                        <span class="summary-value" id="summaryProfit">+$0.00 (75%)</span>
                    </div>
                    <div class="summary-item loss">
                        <span class="summary-label">æ­¢æŸé™é¢</span>
                        <span class="summary-value" id="summaryLoss">-$0.00 (200%)</span>
                    </div>
                </div>
            </section>

            <section class="card tips-section">
                <h2 class="card-title">ğŸ’¡ å¯Œé€”è®¾ç½®æç¤º</h2>
                <div class="tips-content">
                    <p>1. <strong>ä¼˜å…ˆè®¾ç½® Short Leg</strong>ï¼Œè¿™æ˜¯ä¸»è¦é£é™©æ¥æº</p>
                    <p>2. Long Leg å¯é€‰è®¾ç½®ï¼Œä¸»è¦ç”¨äºåŒæ­¥å¹³ä»“</p>
                    <p>3. æ¡ä»¶å•é€‰æ‹© <strong>"åˆ°ä»·è§¦å‘"</strong> ç±»å‹</p>
                    <p>4. æ”¶ç›˜å‰ 15 åˆ†é’Ÿå»ºè®®æ‰‹åŠ¨å¹³ä»“</p>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>0DTE Credit Spread Calculator</p>
        </footer>
    </div>

    <script>
// è·å–DOMå…ƒç´ 
var sellPriceInput = document.getElementById('sellPrice');
var buyPriceInput = document.getElementById('buyPrice');
var takeProfitPercentInput = document.getElementById('takeProfitPercent');
var stopLossPercentInput = document.getElementById('stopLossPercent');

var netCreditEl = document.getElementById('netCredit');
var shortTpPriceEl = document.getElementById('shortTpPrice');
var shortSlPriceEl = document.getElementById('shortSlPrice');
var shortProfitBadgeEl = document.getElementById('shortProfitBadge');
var shortLossBadgeEl = document.getElementById('shortLossBadge');
var longTpPriceEl = document.getElementById('longTpPrice');
var longSlPriceEl = document.getElementById('longSlPrice');
var summaryCreditEl = document.getElementById('summaryCredit');
var summaryProfitEl = document.getElementById('summaryProfit');
var summaryLossEl = document.getElementById('summaryLoss');

// æ ¼å¼åŒ–ä»·æ ¼
function formatPrice(value) {
    if (isNaN(value) || value === null || value < 0) return '$0.00';
    return '$' + value.toFixed(2);
}

// è®¡ç®—å‡½æ•°
function calculate() {
    var sellPrice = parseFloat(sellPriceInput.value) || 0;
    var buyPrice = parseFloat(buyPriceInput.value) || 0;
    var takeProfitPercent = parseFloat(takeProfitPercentInput.value) || 75;
    var stopLossPercent = parseFloat(stopLossPercentInput.value) || 200;

    var netCredit = sellPrice - buyPrice;
    netCreditEl.textContent = formatPrice(netCredit);
    netCreditEl.style.color = netCredit >= 0 ? '#5c7cfa' : '#ff4d6a';

    var profitAmount = netCredit * (takeProfitPercent / 100);
    var lossAmount = netCredit * (stopLossPercent / 100);

    var takeProfitSpread = netCredit * (1 - takeProfitPercent / 100);
    var stopLossSpread = netCredit * (1 + stopLossPercent / 100);

    var shortTpPrice = Math.max(0, takeProfitSpread);
    var shortSlPrice = stopLossSpread;

    shortTpPriceEl.textContent = formatPrice(shortTpPrice);
    shortSlPriceEl.textContent = formatPrice(shortSlPrice);
    shortProfitBadgeEl.textContent = 'ç›ˆåˆ© ' + formatPrice(profitAmount);
    shortLossBadgeEl.textContent = 'äºæŸ ' + formatPrice(lossAmount);

    var longTpPrice = 0.01;
    var longSlPrice = buyPrice > 0 ? Math.max(0.01, buyPrice * 0.5) : 0.01;

    longTpPriceEl.textContent = formatPrice(longTpPrice);
    longSlPriceEl.textContent = formatPrice(longSlPrice);

    summaryCreditEl.textContent = formatPrice(netCredit);
    summaryProfitEl.textContent = '+' + formatPrice(profitAmount) + ' (' + takeProfitPercent + '%)';
    summaryLossEl.textContent = '-' + formatPrice(lossAmount) + ' (' + stopLossPercent + '%)';
}

// ä¸ºæ¯ä¸ªè¾“å…¥æ¡†ç»‘å®šå¤šç§äº‹ä»¶ä»¥ç¡®ä¿iOSå…¼å®¹æ€§
var inputs = [sellPriceInput, buyPriceInput, takeProfitPercentInput, stopLossPercentInput];
var events = ['input', 'change', 'keyup', 'blur', 'touchend'];

for (var i = 0; i < inputs.length; i++) {
    for (var j = 0; j < events.length; j++) {
        inputs[i].addEventListener(events[j], calculate);
    }
}

// æ¯500msè‡ªåŠ¨æ›´æ–°ä¸€æ¬¡ï¼Œç¡®ä¿ä¸ä¼šé—æ¼
setInterval(calculate, 500);

// åˆå§‹è®¡ç®—
calculate();
    </script>
</body>
</html>
